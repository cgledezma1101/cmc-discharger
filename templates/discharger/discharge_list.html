{% extends "base.html" %}
{% comment %}
  This view displays the list of discharges that haven't ended.

  Parameters:
    [list<Discharge>] discharges A list of all the discharges that will be
      displayed
{% endcomment %}

{% block title %}Listado de altas{% endblock %}

{% block stylesheets %}
  {% load staticfiles %}
  <link rel='stylesheet'
        type='text/css'
        href='{% static "stylesheets/discharger/discharge_list.css" %}' />
{% endblock %}

{% block javascripts %}
  {% load staticfiles %}
  <script src='{% static "javascripts/discharger/discharge_list.js" %}'>
  </script>
{% endblock %}

{% block content %}
  {% load helper_filters %}
  <div class='panel panel-primary'>
    <div class='panel-heading'>
      <h1>Listado de altas</h3>
    </div>

    <div class='panel-body'>
      <table class='table table-striped table-hover'>
        <tbody>
          <tr>
            <th>UBICACIÓN</th>
            <th>PACIENTE</th>
            <th>ETAPA</th>
            <th>TIEMPO DE ALTA</th>
          </tr>

          {% for discharge in discharges %}
            <tr>
              <td>{{ discharge.location }}</td>

              <td>{{ discharge.patient_name }}</td>

              <td class='td-progress'>
                <div class='arrow_box'>
                  Some content with more characters <br />
                  And a line break
                </div>
                <div class='progress first' style='width: 100px;'>
                  <div class='progress-bar'
                       role='progressbar'
                       aria-volumenow='0'
                       aria-volumemin='0'
                       aria-volumemax='100'
                       style='width: 0%'>
                    <p class='stage-name'>
                      Dosis / Despacho
                    </p>
                  </div>
                </div>
                <div class='progress' style='width: 100px;'>
                  <div class='progress-bar'
                       role='progressbar'
                       aria-volumenow='0'
                       aria-volumemin='0'
                       aria-volumemax='100'
                       style='width: 0%'>
                    <p class='stage-name'>
                      Facturación
                    </p>
                  </div>
                </div>
                <div class='progress' style='width: 100px;'>
                  <div class='progress-bar'
                       role='progressbar'
                       aria-volumenow='0'
                       aria-volumemin='0'
                       aria-volumemax='100'
                       style='width: 0%'>
                    <p class='stage-name'>
                      Seguro
                    </p>
                  </div>
                </div>
                <div class='progress' style='width: 100px;'>
                  <div class='progress-bar'
                       role='progressbar'
                       aria-volumenow='0'
                       aria-volumemin='0'
                       aria-volumemax='100'
                       style='width: 0%'>
                    <p class='stage-name'>
                      Salida
                    </p>
                  </div>
                </div>
                <div class='progress last' style='width: 100px;'>
                  <div class='progress-bar'
                       role='progressbar'
                       aria-volumenow='0'
                       aria-volumemin='0'
                       aria-volumemax='100'
                       style='width: 0%'>
                    <p class='stage-name'>
                      Hotelería
                      </p>
                  </div>
                </div>
              </td>

              <td class='td-time'>
                <div class='progress progress-striped active'>
                  <div 
                    class='progress-bar time-in-process'
                    data-time=
                      '{{ discharge.start_time | seconds_from }}'
                    style='width: 100%'>
                  </div>
                </div>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
